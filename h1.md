# Salt lake City (X)
<br>

## Running salt command locally
> Reference: <https://terokarvinen.com/2021/salt-run-command-locally/>

**Salt functions**
- Salt is normally used to control slave-computers over a network.
- It can be downloaded using: `$ sudo apt update && sudo apt install salt-minion -y` (installing the salt slave)
- The five most important state functions:
  - **PKG**
    - Installed application x - `pkg.installed`
  - **File**
    - All Linux configurations are text files - `file.managed`
  - **Service**
    - Automatically restarting the daemon when needed - `service.running`
  - **User**
    - Is there a user? - `user.present`
  - **CMD**
    - Running commands - `cmd.run`
<br>



## Installing salt
> Reference: <https://docs.saltproject.io/salt/install-guide/en/latest/topics/install-by-operating-system/linux-deb.html>

**How to install salt for Debian**
- Installing the Salt Project repository:
  - `$ mkdir -p /etc/apt/keyrings` (making sure the keyrings dir exists)
  - `$ curl -fsSL https://packages.broadcom.com/artifactory/api/security/keypair/SaltProjectKey/public | sudo tee /etc/apt/keyrings/salt-archive-keyring.pgp` (downloading public key)
  - `$ curl fsSL curl -fsSL https://github.com/saltstack/salt-install-guide/releases/latest/download/salt.sources | sudo tee /etc/apt/sources.list.d/salt.sources` (creating apt repo target configuration)
- `$ sudo apt update` to update the metadata
- Now you can install minion, master or other Salt components!
- When the wanted components are installed, go ahead and activate them with: `$ sudo systemctl enable xx && sudo systemctl start xx`
<br>


## The master and the slave
> Reference: <https://terokarvinen.com/2018/03/28/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/> 

We already know that Salt can be used to control slave-computers over a network. 
Now, we're gonna briefly look into the installation process. 
<br>

**Installing the master**
- `$ sudo apt update && sudo apt install salt-master -y`
- get the masters hostname with: `$ hostname -I`
<br>

**Making the slaves obedient**
- On the slave, edit the minion (slave) file `$ /etc/salt/minion`
- Type in the master hostname and ID for the slave (ID must be unique).
- To be able to connect to the master restart the slave daemon: `$ sudo systemctl restart salt-minion.service`
- Then back on the master, accept the slave key: `$ sudo salt-key -A`
- Now you can make the slave follow commands. Try it out first with: `$ sudo salt '*' cmd.run 'whoami'`.
  - Did you get a reply?
  -  if answer = yes: print("it's working")
  -  else: print("try again")




## How to write a technical report 101 
> Reference: <https://terokarvinen.com/2006/06/04/raportin-kirjoittaminen-4/>

**Things to keep in mind**
- Write down everything you do in detail!
  - How you did it.
  - What kind of environment you did it in.
  - And everything that happened as a consequence.
  - Best practise is to write down as you go!
- Always remember to be spesific and thorough when reporting problems & unexpected outcomes/behavior.
- How did you fix them, or were you able to fixe them at all? Do tell!
- Format the report properly so that it is easy to read and follow along.
- Always remember to include your references and sources!



# Salt-minion (B)
Down

<br>
<br>

### References:
<br> 

- <https://terokarvinen.com/palvelinten-hallinta/#laksyt>
- <https://terokarvinen.com/2021/salt-run-command-locally/>
- <https://terokarvinen.com/2018/03/28/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/>
